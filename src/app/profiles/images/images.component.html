<div class="container mt-5" id="images">
    <div class="d-flex flex-column flex-sm-row align-items-sm-center">
        <h1 class="mr-2 flex-grow-1">Images</h1>
        <div *ngIf="isMyAccount" class="d-flex flex-column flex-sm-row">
            <button class="btn btn-primary" type="button" routerLink="/upload"><i class="fa fa-plus mr-2" aria-hidden="true"></i>Upload</button>
            <div class="d-flex flex-row" *ngIf="selectedCount > 0">
                <button class="btn flex-grow-1 btn-success mt-2 mt-sm-0 ml-sm-1" type="button"><i class="fas fa-share-alt mr-2"></i>Share <span *ngIf="selectedCount > 1">as album</span></button>
                <button class="btn flex-grow-1 btn-danger mt-2 mt-sm-0 ml-1" type="button" (click)="deleteSelectedImages()"><i class="fas fa-trash mr-2"></i>Delete</button>
            </div>
        </div>
    </div>
    <hr class="my-1">
    <div class="row mx-n1">
        <div *ngFor="let image of imageThumbnailViewModel" 
            class="col-4 
                col-sm-3
                col-md-2 
                col-lg-1 
                square 
                d-inline-block p-1" >
            <summary class="image-thumbnail-frame" placement="bottom" [ngbTooltip]="image?.info?.title">
                <div class="image-thumnail-overlay-shared" *ngIf="isMyAccount && image?.info?.isPublic">
                    <i class="fa fa-link" aria-hidden="true"></i>
                </div>
                <div class="image-thumnail-overlay-loading" *ngIf="image?.resourceUrl == null">
                    <i class="fa fa-spinner-third fa-spin" aria-hidden="true"></i>
                </div>
                <summary *ngIf="isMyAccount" [style.opacity]="(image.selected ? 1 : 0.3)" class="image-thumnail-overlay-selected px-1" (click)="toggleSelect(image)">
                    <i [ngClass]="{'text-primary': image.selected, 'fas': image.selected }" class="far fa-check-square"></i>
                </summary>
                <div [routerLink]="'/i/' + image?.info?.imageCode" class="image-thumbnail image-thumbnail-zoomIn" [style.background-image]="image?.resourceUrl == null ? 'none' : 'url(' + image.resourceUrl + ')'"></div>
            </summary>
        </div>
        <p *ngIf="profile?.images?.data?.length == 0" class="text-muted text-center w-100 mt-3 lead">
            There's no pictures. Yet.
        </p>

        <p *ngIf="isLoading" class="text-muted text-center w-100 mt-3">
            <i class="fa fa-spinner-third fa-spin" aria-hidden="true"></i>
        </p>
        <button *ngIf="!isAllImagesLoaded && !isLoading" (click)="loadNextPage()" class="btn btn-primary w-100 mt-3" type="button"><i class="fa fa-bolt mr-2" aria-hidden="true"></i>Load more images</button>
        <small *ngIf="profile?.images?.data?.length > 0 && isAllImagesLoaded" class="text-muted text-center w-100 mt-3">
            Totally {{profile?.images?.totalCount}} image(s)
        </small>
    </div>
</div>